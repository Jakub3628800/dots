#!/usr/bin/expect -f

# passwrapper - An Expect-based wrapper script to automate the password input process
#
# This script is designed to run another script that prompts for a password.
# It fetches the password from the 'pass' password manager and provides it to
# the target script when prompted.
#
# Usage:
#   ./passwrapper /path/to/your/script path/to/your/password/entry
#
# Arguments:
#   - script_path: The path to the script that requires password input
#   - pass_entry: The path to the password entry in the 'pass' password manager
# Requirements:
#   - expect: This script requires the 'expect' tool to be installed
#   - pass: Ensure that the 'pass' password manager is set up and configured with the appropriate GPG keys

set timeout -1
set script_path [lindex $argv 0]
set pass_entry [lindex $argv 1]

# Fetch the password from pass
set password [exec pass $pass_entry]

spawn $script_path

expect "assword:" # Or the exact prompt your script uses for the password
send "$password\r"

expect eof
